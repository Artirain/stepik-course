---
title: "Урок 43. Skills vs саб-агенты"
description: "Сравнение Skills и саб-агентов в Claude Code: инструкции vs делегирование, когда что использовать"
---

# Skills vs саб-агенты

!!! info "Что ты узнаешь"
    - В чём разница между Skills и саб-агентами
    - Что такое саб-агент и как он работает
    - Когда использовать Skills, а когда — саб-агенты
    - Как они дополняют друг друга

## Введение

Skills и саб-агенты — два механизма, которые расширяют возможности Claude Code. На первый взгляд они похожи: оба помогают выполнять задачи. Но работают они совершенно по-разному.

Ключевое различие в одной фразе: **Skills говорят «как делать», а саб-агенты говорят «сделай за меня»**.

## Skills — это инструкции

Skill описывает набор правил и паттернов. Когда Claude Code применяет Skill, он следует инструкциям в рамках текущей сессии. Это как дать повару рецепт — он готовит сам, но по твоей инструкции.

```markdown
---
name: React Component
description: How to create React components
---

## Правила
1. Функциональные компоненты
2. TypeScript strict
3. Тесты рядом с компонентом
```

Claude Code читает эти правила и применяет их, когда создаёт компонент. Skill не создаёт отдельный процесс — он влияет на поведение основного агента.

## Саб-агенты — это делегирование

Саб-агент (subagent) — это отдельный экземпляр Claude Code, который запускается для выполнения конкретной подзадачи. У него свой контекст, своя область ответственности и свой результат.

Это как менеджер, который делегирует задачу другому сотруднику. Менеджер не объясняет, как именно делать — он говорит, что нужно получить.

Claude Code использует саб-агенты через инструмент `Task`. Основной агент порождает подзадачу, саб-агент выполняет её и возвращает результат.

```
Основной агент: "Проанализируй все тесты в проекте и составь отчёт"
  └── Саб-агент 1: анализирует src/tests/
  └── Саб-агент 2: анализирует lib/tests/
  └── Результаты возвращаются основному агенту
```

## Таблица сравнения

| Аспект | Skills | Саб-агенты |
|---|---|---|
| **Суть** | Набор инструкций (что и как) | Делегирование задачи (сделай) |
| **Аналогия** | Рецепт для повара | Заказ в ресторане |
| **Где выполняется** | В текущей сессии | В отдельном контексте |
| **Контекст** | Разделяет контекст основного агента | Свой изолированный контекст |
| **Файлы** | SKILL.md + references/ | Нет файлов — вызываются программно |
| **Создаёт процесс** | Нет | Да — отдельный экземпляр |
| **Масштаб** | Паттерн для одного типа задач | Подзадача любого масштаба |
| **Результат** | Агент следует правилам | Агент возвращает результат |
| **Настройка** | Разработчик создаёт SKILL.md | Claude Code решает сам, когда порождать |
| **Переиспользуемость** | Высокая — один Skill на все задачи типа | Одноразовая — под конкретную подзадачу |

## Когда что использовать

### Используй Skills, когда:

- Есть повторяющийся паттерн (создание компонентов, эндпоинтов, миграций)
- Нужна консистентность — все файлы должны выглядеть одинаково
- Правила сложные, и ты не хочешь повторять их каждый раз
- Ты хочешь стандартизировать подход для команды

**Пример:** Skill для создания API-эндпоинтов гарантирует, что каждый новый эндпоинт имеет валидацию, обработку ошибок и тесты.

### Используй саб-агенты, когда:

- Задача сложная и состоит из независимых подзадач
- Нужно обработать большой объём данных
- Подзадачи могут выполняться параллельно
- Ты хочешь изолировать контекст, чтобы не засорять основную сессию

**Пример:** Анализ большого проекта — один саб-агент проверяет безопасность, другой — производительность, третий — стиль кода.

## Как они дополняют друг друга

Skills и саб-агенты не конкурируют — они работают на разных уровнях.

Представь задачу: «Создай CRUD для сущности Product».

1. **Основной агент** получает задачу
2. **Саб-агент 1** создаёт модель БД (применяя Skill `db-migration`)
3. **Саб-агент 2** создаёт API-эндпоинты (применяя Skill `api-endpoint`)
4. **Саб-агент 3** создаёт фронтенд-компоненты (применяя Skill `react-component`)
5. **Основной агент** собирает результаты и проверяет интеграцию

Каждый саб-агент использует соответствующий Skill, чтобы работа была консистентной.

## Контроль над саб-агентами

Ты не создаёшь саб-агентов вручную — Claude Code решает сам, когда их использовать. Но ты можешь влиять на это:

- **CLAUDE.md** — опиши, когда стоит разбивать задачу на подзадачи
- **Промпт** — явно попроси: «Раздели задачу на подзадачи и выполни параллельно»
- **`--max-turns`** — ограничь количество шагов для контроля

!!! warning "Помни"
    Саб-агенты потребляют дополнительные токены. Каждый саб-агент — это отдельный вызов модели со своим контекстом. Для простых задач они избыточны.

## Практика

1. Создай Skill для типовой задачи в своём проекте
2. Попроси Claude Code выполнить сложную задачу, которую можно разбить на подзадачи
3. Обрати внимание, создаёт ли Claude Code саб-агенты для выполнения
4. Сравни результат с тем, когда ты явно просишь разделить задачу

## Итоги

- Skills — инструкции «как делать» (рецепт), хранятся в SKILL.md
- Саб-агенты — делегирование «сделай за меня» (заказ), создаются автоматически
- Skills работают в контексте основного агента, саб-агенты — в изолированном
- Skills переиспользуемые и стабильные, саб-агенты — одноразовые под задачу
- Они дополняют друг друга: саб-агенты могут применять Skills

## Проверь себя

<div class="quiz-block" data-quiz-id="u43-q1" data-answer="a" markdown>
  <div class="quiz-question">Что описывает Skill?</div>
  <label><input type="radio" name="u43-q1" value="a"> Как выполнять определённый тип задачи (инструкции)</label>
  <label><input type="radio" name="u43-q1" value="b"> Какую задачу нужно выполнить (делегирование)</label>
  <label><input type="radio" name="u43-q1" value="c"> Какие файлы нужно удалить</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u43-q2" data-answer="b" markdown>
  <div class="quiz-question">Где выполняется саб-агент?</div>
  <label><input type="radio" name="u43-q2" value="a"> В текущей сессии основного агента</label>
  <label><input type="radio" name="u43-q2" value="b"> В отдельном изолированном контексте</label>
  <label><input type="radio" name="u43-q2" value="c"> На удалённом сервере</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u43-q3" data-answer="c" markdown>
  <div class="quiz-question">Когда лучше использовать саб-агенты?</div>
  <label><input type="radio" name="u43-q3" value="a"> Для простых однотипных задач</label>
  <label><input type="radio" name="u43-q3" value="b"> Для стандартизации стиля кода</label>
  <label><input type="radio" name="u43-q3" value="c"> Для сложных задач с независимыми подзадачами</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u43-q4" data-answer="a" markdown>
  <div class="quiz-question">Могут ли саб-агенты использовать Skills?</div>
  <label><input type="radio" name="u43-q4" value="a"> Да, саб-агенты применяют Skills для консистентности</label>
  <label><input type="radio" name="u43-q4" value="b"> Нет, это взаимоисключающие механизмы</label>
  <label><input type="radio" name="u43-q4" value="c"> Только если явно указать в промпте</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u43-q5" data-answer="b" markdown>
  <div class="quiz-question">Какой недостаток саб-агентов?</div>
  <label><input type="radio" name="u43-q5" value="a"> Они не поддерживают TypeScript</label>
  <label><input type="radio" name="u43-q5" value="b"> Они потребляют дополнительные токены</label>
  <label><input type="radio" name="u43-q5" value="c"> Они работают только в headless-режиме</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>
