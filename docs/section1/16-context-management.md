---
title: "Урок 16. Управление контекстом"
description: "Как управлять контекстным окном в Claude Code: /compact, /clear, стратегии работы с контекстом"
---

# Полный гайд по управлению контекстом

!!! info "Что ты узнаешь"
    - Что такое контекстное окно и почему оно ограничено
    - Как использовать /compact и /clear
    - Стратегии эффективной работы с контекстом

## Введение

Контекстное окно — это объём информации, который Claude держит «в голове» одновременно. Оно ограничено: чем больше файлов прочитано и сообщений отправлено, тем ближе ты к лимиту. Управление контекстом — ключевой навык эффективной работы с Claude Code.

## Как растёт контекст

Каждое действие добавляет данные в контекст:

- Твои промпты
- Ответы Claude
- Содержимое прочитанных файлов
- Вывод bash-команд
- Thinking tokens (при extended thinking)

!!! warning "Когда контекст переполнен"
    Claude начинает «забывать» начало разговора, повторяться, терять фокус. Это сигнал — пора /compact или /clear.

## /compact — сжатие

```bash
/compact
```

Claude Code суммаризирует всю историю диалога в краткую сводку. Ты не теряешь контекст полностью — ключевые решения и договорённости сохраняются.

Используй `/compact`, когда:

- Сессия длится больше 20-30 минут
- Индикатор контекста показывает >60-70%
- Claude начинает забывать ранние договорённости

## /clear — полная очистка

```bash
/clear
```

Удаляет весь контекст. Как будто начал новую сессию, но без перезапуска.

Используй `/clear`, когда:

- Переключаешься на другую задачу
- Контекст загрязнён нерелевантной информацией
- Хочешь «чистый лист»

## Стратегии работы с контекстом

### 1. Не лей всё подряд

Вместо «прочитай все файлы в src/» попроси прочитать конкретный файл. Claude Code достаточно умён, чтобы найти нужное.

### 2. Используй @ для указания файлов

```
Посмотри @src/utils.js и добавь валидацию
```

### 3. Делай /compact профилактически

Не жди переполнения — делай /compact каждые 15-20 сообщений.

### 4. Одна задача — одна сессия

Не мешай разные задачи в одной сессии. Переключаешься — начни новую или сделай /clear.

## Практика

1. Запусти сессию и задай 10-15 вопросов
2. Набери `/compact` — посмотри, как сжался контекст
3. Продолжи работу — убедись, что Claude помнит ключевые моменты
4. Попробуй `/clear` и убедись, что контекст сброшен

## Итоги

- Контекстное окно ограничено — управляй им осознанно
- `/compact` — сжимает, сохраняя ключевые решения
- `/clear` — полная очистка
- Стратегия: конкретные файлы, профилактический compact, одна задача — одна сессия

## Проверь себя

<div class="quiz-block" data-quiz-id="u16-q1" data-answer="a">
  <div class="quiz-question">Что происходит при переполнении контекста?</div>
  <label><input type="radio" name="u16-q1" value="a"> Claude начинает забывать ранние части разговора</label>
  <label><input type="radio" name="u16-q1" value="b"> Claude Code аварийно завершается</label>
  <label><input type="radio" name="u16-q1" value="c"> Ничего, контекст безлимитный</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u16-q2" data-answer="b">
  <div class="quiz-question">Чем /compact отличается от /clear?</div>
  <label><input type="radio" name="u16-q2" value="a"> Ничем</label>
  <label><input type="radio" name="u16-q2" value="b"> /compact сжимает контекст, /clear удаляет полностью</label>
  <label><input type="radio" name="u16-q2" value="c"> /compact удаляет, /clear сжимает</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>

<div class="quiz-block" data-quiz-id="u16-q3" data-answer="c">
  <div class="quiz-question">Какая стратегия работы с контекстом рекомендуется?</div>
  <label><input type="radio" name="u16-q3" value="a"> Прочитать все файлы проекта сразу</label>
  <label><input type="radio" name="u16-q3" value="b"> Никогда не делать /compact</label>
  <label><input type="radio" name="u16-q3" value="c"> Конкретные файлы + профилактический /compact</label>
  <button class="quiz-btn" onclick="checkQuiz(this)">Проверить</button>
  <div class="quiz-result"></div>
</div>
